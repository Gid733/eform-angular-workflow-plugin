<eform-subheader [title]="'Edit workflow case' | translate"> </eform-subheader>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-9">
      <mdb-card class="sticky-top mb-4 mt-4" style="z-index: 1">
        <mdb-card-header
          ><p class="h4">{{ 'Edit workflow case' | translate }}</p>
        </mdb-card-header>
        <mdb-card-body>
          <div class="container-fluid">
            <div class="row">
              <mdb-card class="mb-4 mt-4" style="width: 100%">
                <mdb-card-header>{{
                  'To be solved by' | translate
                }}</mdb-card-header>
                <mdb-card-body>
                  <ng-select
                    id="toBeSolvedByEdit"
                    [bindLabel]="'siteName'"
                    [bindValue]="'id'"
                    [clearable]="false"
                    [(ngModel)]="workflowCaseModel.toBeSolvedById"
                    [items]="deviceUsersList"
                  ></ng-select>
                </mdb-card-body>
              </mdb-card>
            </div>
            <div class="row">
              <mdb-card class="mb-4 mt-4" style="width: 100%">
                <mdb-card-header>{{ 'Status' | translate }}</mdb-card-header>
                <mdb-card-body>
                  <ng-select
                    id="statusEdit"
                    [bindLabel]="'text'"
                    [bindValue]="'id'"
                    [clearable]="false"
                    [(ngModel)]="workflowCaseModel.status"
                    [items]="statuses"
                  ></ng-select>
                </mdb-card-body>
              </mdb-card>
            </div>
            <div class="row">
              <mdb-card class="mb-4 mt-4" style="width: 100%">
                <mdb-card-header>{{
                  'Select deadline' | translate
                }}</mdb-card-header>
                <mdb-card-body>
                  <form [formGroup]="dataForm">
                    <div class="w-100">
                      <div
                        class="md-form"
                        [owlDateTimeTrigger]="deadlinePicker"
                      >
                        <i class="material-icons prefix"> calendar_today </i>
                        <input
                          mdbInput
                          formControlName="deadline"
                          name="deadline"
                          required
                          [(ngModel)]="workflowCaseModel.deadline"
                          type="text"
                          [owlDateTime]="deadlinePicker"
                          [selectMode]="'single'"
                          class="form-control input-sm"
                          id="deadlineFormInput"
                        />
                      </div>
                    </div>
                  </form>
                </mdb-card-body>
              </mdb-card>
            </div>
            <div class="row">
              <mdb-card class="mb-4 mt-4" style="width: 100%">
                <mdb-card-header>{{
                  'Select date incident' | translate
                }}</mdb-card-header>
                <mdb-card-body>
                  <form [formGroup]="dataForm">
                    <div class="w-100">
                      <div
                        class="md-form"
                        [owlDateTimeTrigger]="dateOfIncidentPicker"
                      >
                        <i class="material-icons prefix"> calendar_today </i>
                        <input
                          mdbInput
                          formControlName="dateOfIncident"
                          name="dateOfIncident"
                          required
                          [(ngModel)]="workflowCaseModel.dateOfIncident"
                          type="text"
                          [owlDateTime]="dateOfIncidentPicker"
                          [selectMode]="'single'"
                          class="form-control input-sm"
                          id="dateOfIncidentFormInput"
                        />
                      </div>
                    </div>
                  </form>
                </mdb-card-body>
              </mdb-card>
            </div>
            <div class="row">
              <mdb-card class="mb-4 mt-4" style="width: 100%">
                <mdb-card-header>{{
                  'Description' | translate
                }}</mdb-card-header>
                <mdb-card-body>
                  <div class="md-form">
                    <input
                      mdbInput
                      type="text"
                      class="form-control"
                      id="descriptionEdit"
                      [(ngModel)]="workflowCaseModel.description"
                    />
                  </div>
                </mdb-card-body>
              </mdb-card>
            </div>
            <div class="row">
              <mdb-card class="mb-4 mt-4" style="width: 100%">
                <mdb-card-header>{{
                  'Action plan' | translate
                }}</mdb-card-header>
                <mdb-card-body>
                  <div class="md-form">
                    <input
                      mdbInput
                      type="text"
                      class="form-control"
                      id="actionPlanEdit"
                      [(ngModel)]="workflowCaseModel.actionPlan"
                    />
                  </div>
                </mdb-card-body>
              </mdb-card>
            </div>
            <div class="row">
              <mdb-card class="mb-4 mt-4" style="width: 100%">
                <mdb-card-header>{{ 'Places' | translate }}</mdb-card-header>
                <mdb-card-body>
                  <ng-select
                    id="placeEdit"
                    [bindLabel]="'name'"
                    [bindValue]="'id'"
                    [clearable]="false"
                    [(ngModel)]="workflowCaseModel.incidentPlace"
                    [items]="places"
                  ></ng-select>
                </mdb-card-body>
              </mdb-card>
            </div>
          </div>
        </mdb-card-body>
      </mdb-card>
    </div>
    <div class="col-md-3">
      <mdb-card class="sticky-top mb-4 mt-4" style="z-index: 1">
        <mdb-card-footer>
          <div
            class="d-flex justify-content-center align-items-center flex-column mt-2"
          >
            <div>
              <button
                mdbBtn
                class="btn-success btn-small-height"
                id="saveEditBtn"
                (click)="updateWorkflowCase()"
              >
                {{ 'Save' | translate }}
              </button>
              <button
                mdbBtn
                id="cancelEditBtn"
                class="btn btn-accent text-black-50 btn-small-height"
                (click)="goBack()"
              >
                {{ 'Cancel' | translate }}
              </button>
            </div>
          </div>
        </mdb-card-footer>
      </mdb-card>
    </div>
  </div>
</div>

<owl-date-time
  [pickerType]="'calendar'"
  [firstDayOfWeek]="1"
  #deadlinePicker
></owl-date-time>

<owl-date-time
  [pickerType]="'calendar'"
  [firstDayOfWeek]="1"
  #dateOfIncidentPicker
></owl-date-time>
